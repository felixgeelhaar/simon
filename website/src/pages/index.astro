---
import Layout from '../layouts/Layout.astro';

const capabilities = [
	{
		title: 'Coach',
		description: 'Defines a goal, definition of done, and evidence list before the agent starts making API calls.'
	},
	{
		title: 'Guard',
		description: 'Applies hard budgets, command scoping, and verification gates so every tool call stays within policy.'
	},
	{
		title: 'Runtime',
		description: 'Episodes advance with rolling summaries so the session never collapses even during long interactions.'
	},
	{
		title: 'MCP Proxy',
		description: 'Digest tool outputs internally to reduce noise and protect secrets before the agent sees them.'
	},
	{
		title: 'Memory',
		description: 'Vectorized experience recall archives completed sessions for future reference.'
	},
	{
		title: 'CLI first',
		description: 'Local-first Go binary with a Bubble Tea TUI keeps you in control on every host.'
	}
];

const workflow = [
	{
		step: 'Plan the mission',
		plan: 'Write the goal, definition of done, and evidence list in the YAML task file.'
	},
	{
		step: 'Run under guard',
		plan: 'The CLI enforces budgets, intercepts tool calls, and streams status updates at each iteration.'
	},
	{
		step: 'Verify completion',
		plan: 'Every piece of evidence is checked before the task is marked done and memory is archived.'
	},
	{
		step: 'Record the impact',
		plan: 'Asciinema captures the terminal so the run can be shared with stakeholders.'
	}
];

const docHighlights = [
	{
		title: 'Governance & Security',
		text: 'Simon treats LLMs as workers and applies deterministic rules: budgets halt execution, commands are scoped, and evidence gates prevent hallucinated deliveries.'
	},
	{
		title: 'Architecture',
		text: 'Built in Go with Cobra + Bubble Tea, storage on SQLite + the local filesystem, and a plugin-ready guard/coach layer.'
	},
	{
		title: 'Deployment',
		text: 'The README outlines GitHub Pages for marketing and optionally a Homebrew tap for distribution.'
	}
];
---

<Layout title="Simon — AI Agent Governance Runtime">
	<link
		rel="stylesheet"
		type="text/css"
		href="https://cdn.jsdelivr.net/npm/asciinema-player@3.14.0/dist/bundle/asciinema-player.css"
		slot="head"
	/>
	<script
		src="https://cdn.jsdelivr.net/npm/asciinema-player@3.14.0/dist/bundle/asciinema-player.min.js"
		is:inline
		slot="head"
	></script>

	<main class="w-full overflow-hidden">
		<section class="relative isolate overflow-hidden border-b border-white/10 bg-gradient-to-b from-black via-slate-950 to-black py-16">
			<div class="pointer-events-none absolute inset-x-0 top-0 h-36 bg-gradient-to-b from-slate-900/90 to-transparent"></div>
			<div class="relative z-10 mx-auto flex max-w-6xl flex-col gap-8 px-6">
				<p class="text-xs uppercase tracking-[0.5em] text-slate-400">Deterministic control plane</p>
				<h1 class="text-4xl font-semibold leading-tight text-white md:text-5xl">
					Simon governs every episode, so AI agents stay factual, budgeted, and verifiable.
				</h1>
				<p class="text-lg text-slate-300 md:max-w-3xl">
					Local-first infrastructure that enforces goals, safe command usage, and evidence collection. Slack, fuzziness, and hallucinations
					are handled by the runtime, not by hopeful prompting.
				</p>

				<div class="flex flex-wrap gap-4">
					<a
						class="flex items-center justify-center rounded-full bg-emerald-500 px-6 py-3 text-base font-semibold text-slate-950 transition hover:bg-emerald-400"
						href="https://github.com/felixgeelhaar/simon"
						target="_blank"
						rel="noreferrer"
					>
						View the code
					</a>
					<a
						class="flex items-center justify-center rounded-full border border-white/30 px-6 py-3 text-base font-semibold text-white transition hover:border-white/60"
						href="https://github.com/felixgeelhaar/simon#readme"
					>
						Read the README
					</a>
					<span class="pill bg-white/10 text-white">CLI · Bubble Tea · Local</span>
				</div>

				<div class="glass-panel mt-6 rounded-3xl p-6">
					<p class="text-xs uppercase tracking-[0.4em] text-slate-400">Session recording</p>
					<h2 class="mt-2 text-lg font-semibold text-white">Asciinema captures the realtime TUI</h2>
					<p class="text-sm text-slate-400">
						The stub provider run shows the hero recording without pretending the CLI is something else. It always mirrors the
						real TUI output.
					</p>
				</div>
			</div>
		</section>

		<section class="border-b border-white/10 py-16">
			<div class="mx-auto grid max-w-6xl gap-6 px-6 md:grid-cols-3">
				{docHighlights.map((note) => (
					<article key={note.title} class="glass-panel rounded-3xl p-6">
						<p class="text-xs font-semibold uppercase tracking-[0.4em] text-slate-400">{note.title}</p>
						<p class="mt-4 text-sm text-slate-200">{note.text}</p>
					</article>
				))}
			</div>
		</section>

		<section class="border-b border-white/10 py-16">
			<div class="mx-auto flex max-w-6xl flex-col gap-10 px-6">
				<h2 class="text-3xl font-semibold text-white">Governance stack</h2>
				<p class="text-slate-300">
					The README highlights Coach, Guard, and Runtime as the fundamental pillars, with MCP proxy and Memory providing context and safety.
				</p>
				<div class="grid gap-6 md:grid-cols-2">
					{capabilities.map((capability) => (
						<div key={capability.title} class="glass-panel rounded-3xl p-6">
							<p class="text-sm font-semibold uppercase tracking-[0.4em] text-slate-400">{capability.title}</p>
							<p class="mt-3 text-slate-200">{capability.description}</p>
						</div>
					))}
				</div>
			</div>
		</section>

		<section class="border-b border-white/10 py-16">
			<div class="mx-auto flex max-w-6xl flex-col gap-10 px-6">
				<h2 class="text-3xl font-semibold text-white">Session lifecycle</h2>
				<p class="text-slate-300">
					Every run progresses through planning, iteration, verification, and archiving. There are no loose ends once the definition
					of done is satisfied and the evidence list is confirmed.
				</p>
				<div class="grid gap-6 md:grid-cols-2">
					{workflow.map((item) => (
						<article key={item.step} class="glass-panel rounded-3xl p-6 text-slate-100">
							<p class="text-xs font-semibold uppercase tracking-[0.4em] text-slate-400">{item.step}</p>
							<p class="mt-3 text-slate-200">{item.plan}</p>
						</article>
					))}
				</div>
			</div>
		</section>

		<section class="border-b border-white/10 py-16">
			<div class="mx-auto flex max-w-6xl flex-col gap-6 px-6">
				<h2 class="text-3xl font-semibold text-white">How to get started</h2>
				<p class="text-slate-300">
					Simon is built locally. Clone the repo, build the binary, configure your preferred provider, then run a task with the CLI.
				</p>
				<pre class="glass-panel rounded-3xl p-6 text-sm text-slate-100">
git clone https://github.com/felixgeelhaar/simon.git
cd simon
go build -o simon cmd/simon/main.go

./simon config set openai.api_key your-api-key
./simon run task.yaml --provider openai
				</pre>
				<p class="text-sm text-slate-400">Quick start instructions are pulled directly from the README.</p>
			</div>
		</section>

		<section class="border-b border-white/10 py-16">
			<div class="mx-auto grid max-w-6xl gap-6 px-6 lg:grid-cols-[1.3fr_0.7fr]">
				<div>
					<h2 class="text-3xl font-semibold text-white">Session playback</h2>
					<p class="text-slate-300">
						The hero recording still uses the stub provider so it can run without upstream latency or costs.
					</p>
				</div>
				<div class="glass-panel rounded-3xl p-6">
					<div class="h-72 overflow-hidden rounded-2xl border border-white/10 bg-black/60">
						<div id="player" class="h-full w-full"></div>
					</div>
				</div>
			</div>
		</section>

		<section class="border-b border-white/10 py-16">
			<div class="mx-auto flex max-w-6xl flex-col gap-6 px-6 text-center">
				<p class="text-xs uppercase tracking-[0.6em] text-slate-400">Built for power developers</p>
				<h2 class="text-3xl font-semibold text-white">Control the execution, not just the prompt</h2>
				<p class="text-slate-300">
					Simon is local-first, configurable, and deterministic. The documentation and recording show exactly what the CLI outputs—
					no vague marketing fluff.
				</p>
				<div class="flex flex-wrap justify-center gap-4">
					<a
						class="rounded-full bg-emerald-500 px-8 py-3 font-semibold text-slate-950 transition hover:bg-emerald-400"
						href="https://github.com/felixgeelhaar/simon"
						target="_blank"
						rel="noreferrer"
					>
						Clone the repository
					</a>
					<a
						class="rounded-full border border-white/30 px-8 py-3 font-semibold text-white transition hover:border-white/60"
						href="https://github.com/felixgeelhaar/simon#quick-start"
					>
						Follow the quick start
					</a>
				</div>
			</div>
		</section>
	</main>

	<script is:inline>
		function startPlayer() {
			const el = document.getElementById('player');
			if (window.AsciinemaPlayer && el) {
				AsciinemaPlayer.create('/simon/simon_demo.cast', el, {
					autoPlay: true,
					loop: true,
					speed: 1.1,
					theme: 'monokai',
					terminalFontSize: '13px',
					fit: 'width'
				});
			} else {
				setTimeout(startPlayer, 200);
			}
		}

		startPlayer();
	</script>
</Layout>
